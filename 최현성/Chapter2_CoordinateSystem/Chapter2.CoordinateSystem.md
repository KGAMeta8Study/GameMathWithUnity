# 2.좌표계

# 좌표계란?

**좌표계**는 물체의 위치를 하나의 점으로 정의하고, 이를 독립적으로 식별할 수 있도록 하는 체계이다. 이를 통해 공간 내의 특정 지점을 수치적으로 표현할 수 있으며, 다양한 응용 분야에서 활용된다.

---

### **직교좌표계 (데카르트 좌표계)**

직교좌표계는 원점 (0,0)을 기준으로, 서로 직각으로 교차하는 두 축 x축과 y축으로 구성된 2차원 평면상에서의 좌표 체계이다. 이 체계는 원점을 기준으로 물체의 위치를 두 축에 대한 거리로 나타낸다.

---

### **좌표의 표현**

직교좌표계에서 한 점의 좌표는 다음과 같이 정의된다:

- **x좌표**: 점이 x축을 기준으로 얼마나 떨어져 있는지를 나타낸다.
- **y좌표**: 점이 y축을 기준으로 얼마나 떨어져 있는지를 나타낸다.

### **3D 좌표계**

직교좌표계는 2차원에서 3차원으로 확장될 수 있다. **3D 좌표계**는 원점을 기준으로 서로 직각으로 교차하는 세 축 x축, y축, 그리고 z축으로 구성된다. 이 좌표계는 다음과 같이 물체의 위치를 정의한다:

### **오른손 좌표계와 왼손 좌표계**

3D 좌표계에서는 축의 방향과 회전 규칙에 따라 **오른손 좌표계**와 **왼손 좌표계**로 나뉜다.

### **오른손 좌표계**

- x, y, z축의 방향은 오른손의 엄지, 검지, 중지로 정의한다.
    - 엄지: x축
    - 검지: y축
    - 중지: z축
- 오른손 좌표계에서는 x축에서 y축으로 회전할 때, z축이 **양의 방향**을 향한다.

### **왼손 좌표계**

- x, y, z축의 방향은 왼손의 엄지, 검지, 중지로 정의한다.
    - 엄지: x축
    - 검지: y축
    - 중지: z축
- 왼손 좌표계에서는 x축에서 y축으로 회전할 때, z축이 **음의 방향**을 향한다.
- Unity는 기본적으로 **왼손 좌표계**를 사용한다.

---

### **Unity와 좌표계의 맥락**

Unity에서는 **왼손 좌표계**를 사용하여 3D 공간을 정의한다. 이를 통해:

- **x축**: 오른쪽 방향을 나타낸다.
- **y축**: 위쪽 방향을 나타낸다.
- **z축**: 앞쪽 방향(화면 바깥쪽)을 나타낸다.

Unity의 왼손 좌표계는 다음과 같은 특징을 가진다:

- **카메라**: z축이 **화면에서 바깥쪽으로** 향한다.
- **Transform**:
    - Forward: +z축
    - Right: +x축
    - Up: +y축

# 로컬 좌표계와 월드 좌표계

3D 공간에서 물체의 위치와 방향을 표현할 때, 로컬 좌표계(Local Coordinate System)와 월드 좌표계(World Coordinate System)는 중요한 개념이다. 두 좌표계는 서로 다른 기준점을 가지고 공간상의 위치와 방향을 나타낸다.

---

### **월드 좌표계 (World Coordinate System)**

- **정의**: 월드 좌표계는 **전체 공간**의 기준이 되는 좌표계이다.
- **기준**: 월드 좌표계의 원점은 3D 세계의 고정된 기준점 (0,0,0)이다.
    
- **특징**:
    - 모든 물체의 위치와 방향은 월드 좌표계를 기준으로 표현된다.
    - 예를 들어, 어떤 물체가 (5,3,−2)에 있다면, 이는 물체가 월드 원점에서 x축으로 5, y축으로 3, z축으로 -2만큼 떨어져 있다는 의미이다.

---

### **로컬 좌표계 (Local Coordinate System)**

- **정의**: 로컬 좌표계는 **각 물체 고유의 기준**이 되는 좌표계이다.
- **기준**: 물체의 Transform(변환)을 기준으로 한 상대적인 좌표계이다.
- **특징**:
    - 물체 자신이 원점이며, x축, y축, z축은 물체의 방향에 따라 회전하거나 이동할 수 있다.
    - 예를 들어, 어떤 물체의 로컬 좌표계에서 (1,0,0)이라는 좌표는 해당 물체의 **오른쪽 방향**으로 1만큼 떨어진 지점을 의미한다.
    - 부모 객체가 있을 경우, 로컬 좌표계는 부모 객체의 좌표계를 기준으로 정의된다.

---

### **Unity에서의 로컬 좌표계와 월드 좌표계**

Unity에서는 물체의 위치와 회전을 다음 두 방식으로 다룬다:

- **월드 좌표계 (World Space)**:
    - `transform.position`: 월드 좌표계 기준으로 물체의 위치를 반환하거나 설정한다.
    - 카메라나 전체 환경에서의 위치를 표현할 때 사용한다.
- **로컬 좌표계 (Local Space)**:
    - `transform.localPosition`: 부모 객체를 기준으로 한 물체의 위치를 반환하거나 설정한다.
    - `transform.forward`, `transform.right`, `transform.up`: 물체의 로컬 좌표계에서의 방향 벡터를 나타낸다.
    - 자식 객체를 기준으로 위치와 방향을 설정할 때 사용된다.

---

### **활용 예시**

1. **월드 좌표계를 기준으로 이동**:
    
    물체가 특정 위치로 이동하도록 하려면, 월드 좌표계에서의 좌표를 지정한다.
    
    ```csharp
    transform.position = new Vector3(10, 5, 0); // 월드 기준
    ```
    
2. **로컬 좌표계를 기준으로 이동**:
    
    물체가 자신을 기준으로 일정 방향으로 이동하도록 하려면, 로컬 좌표계를 사용한다.
    
    ```csharp
    transform.Translate(Vector3.forward * Time.deltaTime); // 로컬 기준
    ```
    
3. **부모-자식 관계**:
    
    부모 객체의 Transform을 기준으로 자식 객체의 위치를 조정할 때 로컬 좌표계를 사용한다.
    
    ```csharp
    transform.localPosition = new Vector3(1, 0, 0); // 부모 기준으로 이동
    ```
    

---

### **로컬 좌표계와 월드 좌표계의 변환**

Unity에서는 두 좌표계 간 변환을 지원하는 메서드를 제공한다:

- `Transform.TransformPoint()`: 로컬 좌표계를 월드 좌표계로 변환.
- `Transform.InverseTransformPoint()`: 월드 좌표계를 로컬 좌표계로 변환.

예를 들어:

```csharp
Vector3 worldPos = transform.TransformPoint(localPos); // 로컬 → 월드
Vector3 localPos = transform.InverseTransformPoint(worldPos); // 월드 → 로컬

```

# 스크린 좌표와 2D 극좌표계

3D 또는 2D 공간에서 위치를 표현하기 위해 다양한 좌표계가 사용되며, 각각 특정 상황에서 유용하다. 여기에서는 스크린 좌표(Screen Coordinate System)와 2D 극좌표계(Polar Coordinate System)에 대해 알아본다.

---

## **스크린 좌표 (Screen Coordinate System)**

### 정의

스크린 좌표는 **화면상의 픽셀 위치를 나타내는 좌표계**이다. 게임이나 애니메이션에서 물체를 화면에 표시할 때 사용되며, 일반적으로 2D 공간에서 동작한다.

### 특징

- **기준점**: 스크린 좌표는 화면의 **왼쪽 상단**을 기준으로 한다.
    - 왼쪽 상단이 (0,0).
    - x축: 오른쪽 방향.
    - y축: 아래쪽 방향.
- **단위**: 좌표는 화면의 해상도를 기준으로 픽셀 단위로 표현된다. 예를 들어, 1920×1080 해상도의 화면에서는 x 좌표는 0에서 1919, y 좌표는 0에서 1079 사이의 값을 가진다.
    
    1920×1080
    
- **주요 활용**:
    - UI 배치: 버튼, 텍스트, 이미지 등 화면상에 고정된 요소의 위치를 설정.
    - 마우스 입력: 클릭이나 터치의 위치를 감지.

### Unity에서의 사용

Unity에서는 **스크린 좌표**를 다음처럼 다룬다:

- **픽셀 단위로 좌표 가져오기**:
    
    ```csharp
    Vector3 screenPosition = Camera.main.WorldToScreenPoint(transform.position)
    ```
    
    - `WorldToScreenPoint()`: 월드 좌표를 스크린 좌표로 변환.
- **마우스 위치 얻기**:
    
    ```csharp
    Vector3 mousePos = Input.mousePosition;
    ```
    
    - `mousePos.x`, `mousePos.y`: 마우스의 현재 스크린 좌표.

### 한계

스크린 좌표는 2D 평면상에서 픽셀 단위로 동작하기 때문에 3D 공간에서의 깊이 정보(zzz-축)를 표현할 수 없다. 이를 보완하기 위해 월드 좌표나 뷰포트 좌표와 함께 사용된다.

---

## **2D 극좌표계 (Polar Coordinate System)**

### 정의

2D 극좌표계는 **점의 위치를 반지름과 각도로 나타내는 좌표계**이다. 데카르트 좌표계(직교좌표계)에서의 x, y좌표를 대체하여 **원점에서의 거리**와 **각도**로 표현한다.

### 구성 요소

- **반지름 (r)**: 원점에서 해당 점까지의 거리.
- **각도 ()**: 점이 기준선(보통 x축)과 이루는 각도. 보통 라디안 단위로 측정되며, 0에서 2π 사이의 값을 가진다.

### 좌표 변환

1. **극좌표 → 직교좌표**:

    $x=r⋅cos(θ),y=r⋅sin(θ)$
    
2. **직교좌표 → 극좌표**:

    $r=x2+y2,θ=arctan(xy)$
    
    $r=x2+y2,θ=arctan⁡(yx)$

    $r = \sqrt{x^2 + y^2}$
   
    $\theta = \arctan\left(\frac{y}{x}\right)$
    

### 특징

- 중심에서 방사형으로 점을 표현하기 때문에 원형 패턴이나 회전 효과를 구현하는 데 적합하다.
- r=0: 원점에 위치.
- θ: 시계 방향 또는 반시계 방향으로 각도 증가(좌표계에 따라 다름).

### Unity에서의 사용

극좌표는 주로 원형으로 배치된 오브젝트나 회전 애니메이션에서 활용된다.

- **원형으로 오브젝트 배치**:
    
    ```csharp
    float radius = 5f; // 반지름
    float angle = Mathf.PI / 4; // 45도
    Vector3 position = new Vector3(
        radius * Mathf.Cos(angle),
        radius * Mathf.Sin(angle),
        0
    );
    ```
    
- **회전 애니메이션**:
극좌표에서 각도를 증가시키며 점이 원형 경로를 따라 움직이도록 설정한다:
    
    ```csharp
    angle += Time.deltaTime; // 각도 증가
    transform.position = new Vector3(
        radius * Mathf.Cos(angle),
        radius * Mathf.Sin(angle),
        0
    );
    ```
    

# 3D 극좌표계 (Spherical Coordinate System)

3D 극좌표계는 3차원 공간에서 구면 좌표계(Spherical Coordinate System)라고도 불리며, 점의 위치를 **구의 반지름, 방위각, 고도각**으로 나타내는 좌표계이다. 직교좌표계(x, y, z)와 달리 점을 원점에서의 거리와 두 개의 각도로 정의한다.

---

## **3D 극좌표계의 구성 요소**

3D 극좌표계는 다음 세 가지 요소로 구성된다:

1. **반지름 (r)**
    - 원점에서 점까지의 거리.
    - 항상 양수이며, r=0이면 원점에 위치.
        
        $r=0r = 0$
        
2. **방위각 (θ)**
    - 점의 투영이 xy평면에서 x축과 이루는 각도.
    - 일반적으로 $0≤θ<2π로$ 정의되며, 라디안 단위로 측정.
3. **고도각 (ϕ)**
    - 점이 z축과 이루는 각도.
    - $0≤ϕ≤π$로 정의되며, 0은 z축 위, π/2는 xy평면, π는 z축 아래 방향을 나타낸다.

---

## **3D 극좌표계와 직교좌표계 간의 변환**

### 1. **3D 극좌표 → 직교좌표**

3D 극좌표계의 $(r,θ,ϕ)$를 직교좌표계의 (x,y,z)로 변환:

$x=r⋅sin(ϕ)⋅cos(θ)$

$y=r⋅sin(ϕ)⋅sin(θ)$

$z=r⋅cos(ϕ)$

### 2. **직교좌표 → 3D 극좌표**

직교좌표계의 (x,y,z)(x, y, z)(x,y,z)를 3D 극좌표계의 (r,θ,ϕ)(r, \theta, \phi)(r,θ,ϕ)로 변환:

$r =  \sqrt{x^2 + y^2 + z^2}$

$θ=arctan2(y,x)$

$ϕ=arccos⁡(zr)(r≠0)$

---

## **특징**

1. **방사형 표현**
    - 점의 위치를 원점과의 거리와 각도로 표현하기 때문에, 구면상에서의 대칭적인 작업(예: 구체 표면에 점을 배치)에서 매우 유용하다.
2. **응용**
    - 구체적 형태의 물체나 환경을 다루는 물리학 및 그래픽스(예: 천체 시뮬레이션, 라이트맵).
    - 카메라 움직임, 회전 애니메이션, 원형 배치.
3. **범위**
    - θ : 0에서 2π (360도). xy평면의 방향.
    - ϕ: 0에서 π (180도). z축 기준 고도.

---

## **Unity에서의 활용**

Unity에서는 3D 극좌표계를 사용하여 구면 좌표계 기반의 움직임이나 배치를 구현할 수 있다.

### **1. 구 표면상의 점 배치**

구체 표면에 점들을 고르게 배치하려면, 극좌표를 활용하여 각도와 반지름을 설정한다:

```csharp
float radius = 5f; // 구의 반지름
float theta = Random.Range(0, Mathf.PI * 2); // 방위각
float phi = Random.Range(0, Mathf.PI); // 고도각

Vector3 position = new Vector3(
    radius * Mathf.Sin(phi) * Mathf.Cos(theta),
    radius * Mathf.Sin(phi) * Mathf.Sin(theta),
    radius * Mathf.Cos(phi)
);

// 구체 표면에 위치 설정
transform.position = position;
```

### **2. 카메라의 구면 회전**

카메라가 특정 점을 중심으로 구형 궤적을 따라 회전하도록 설정할 수 있다:

```csharp
float radius = 10f; // 카메라와 중심점 사이의 거리
float theta = Time.time; // 시간에 따라 방위각 증가
float phi = Mathf.PI / 4; // 고정된 고도각

Vector3 cameraPosition = new Vector3(
    radius * Mathf.Sin(phi) * Mathf.Cos(theta),
    radius * Mathf.Sin(phi) * Mathf.Sin(theta),
    radius * Mathf.Cos(phi)
);

// 카메라 위치와 바라볼 대상 설정
Camera.main.transform.position = cameraPosition;
Camera.main.transform.LookAt(Vector3.zero);

```

